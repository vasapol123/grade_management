// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Student {
  id                  Int                  @id @default(autoincrement())
  year                Int
  Enrollments         Enrollment[]
  GradeAverageReports GradeAverageReport[]
}

model Course {
  id          Int          @id @default(autoincrement())
  code        String       @unique
  name        String
  credit      Int
  Enrollments Enrollment[]
}

model GradeReport {
  id         Int         @id @default(autoincrement())
  letter     String
  number     Float
  Enrollment Enrollment?
}

model GradeAverageReport {
  id           Int    @id @default(autoincrement())
  semester     String
  academicYear String
  gpa          String
  gpax         String

  student   Student @relation(fields: [studentId], references: [id])
  studentId Int
}

model Enrollment {
  id           Int    @id @default(autoincrement())
  semester     String
  academicYear String

  student       Student     @relation(fields: [studentId], references: [id])
  studentId     Int
  gradeReport   GradeReport @relation(fields: [gradeReportId], references: [id])
  gradeReportId Int         @unique
  course        Course      @relation(fields: [courseId], references: [id])
  courseId      Int
}
